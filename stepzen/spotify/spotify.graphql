type Track {
    name: String
    popularity: Int
}

type Image {
    url: String
}

type Artist {
    name: String
}

type Query {
    artists: [Artist]
    @rest(
        setters: [
            {field:"name",path:"name"}
            ]
        resultroot: "tracks.items[].track.album.artists[]"
        endpoint: "https://api.spotify.com/v1/playlists/$playlistid"
        configuration: "spotify_config"
    )
    tracks: [Track]
    @rest(
        setters: [
            {field:"name",path:"track.name"}
            {field:"popularity",path:"track.popularity"}
        ]
        resultroot: "tracks.items[]"
        endpoint: "https://api.spotify.com/v1/playlists/$playlistid"
        configuration: "spotify_config"
    )
    images: [Image]
    @rest(
        setters: [
            {field:"url",path:"url"}
            ]
        resultroot: "tracks.items[].track.album.images[1]"
        endpoint: "https://api.spotify.com/v1/playlists/$playlistid"
        configuration: "spotify_config"
    )
}

type Playlist {
    id: String
    name: String!
    tracks: [Track]
        @materializer (query: "tracks")
    artists: [Artist]
        @materializer (query: "artists")
    images: [Image]
        @materializer (query: "images")
}

type Query {
    playlistById: Playlist
        @rest(
            endpoint: "https://api.spotify.com/v1/playlists/$playlistid"
            configuration: "spotify_config"
        )
}